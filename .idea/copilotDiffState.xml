<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Backend/admin-service/src/main/java/com/cibf/adminservice/admin/Repository/SystemAlertRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Backend/admin-service/src/main/java/com/cibf/adminservice/admin/Repository/SystemAlertRepository.java" />
              <option name="originalContent" value="package com.cibf.adminservice.admin.Repository;&#10;&#10;import com.cibf.adminservice.admin.Common.AlertSeverity;&#10;import com.cibf.adminservice.admin.Common.AlertStatus;&#10;import com.cibf.adminservice.admin.Common.AlertType;&#10;import com.cibf.adminservice.admin.Entity.SystemAlert;&#10;import org.springframework.data.domain.Page;&#10;import org.springframework.data.domain.Pageable;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.List;&#10;&#10;/**&#10; * Repository interface for SystemAlert entity&#10; */&#10;@Repository&#10;public interface SystemAlertRepository extends JpaRepository&lt;SystemAlert, Long&gt; {&#10;&#10;    Page&lt;SystemAlert&gt; findByStatus(AlertStatus status, Pageable pageable);&#10;&#10;    Page&lt;SystemAlert&gt; findBySeverity(AlertSeverity severity, Pageable pageable);&#10;&#10;    Page&lt;SystemAlert&gt; findByAlertType(AlertType alertType, Pageable pageable);&#10;&#10;    Page&lt;SystemAlert&gt; findByServiceName(String serviceName, Pageable pageable);&#10;&#10;    List&lt;SystemAlert&gt; findByStatusIn(List&lt;AlertStatus&gt; statuses);&#10;&#10;    List&lt;SystemAlert&gt; findByStatusAndSeverity(AlertStatus status, AlertSeverity severity);&#10;&#10;    List&lt;SystemAlert&gt; findByCreatedAtBeforeAndStatus(LocalDateTime date, AlertStatus status);&#10;&#10;    long countByStatus(AlertStatus status);&#10;&#10;    long countBySeverity(AlertSeverity severity);&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.cibf.adminservice.admin.Repository;&#13;&#10;&#13;&#10;import com.cibf.adminservice.admin.Common.AlertSeverity;&#13;&#10;import com.cibf.adminservice.admin.Common.AlertStatus;&#13;&#10;import com.cibf.adminservice.admin.Common.AlertType;&#13;&#10;import com.cibf.adminservice.admin.Entity.SystemAlert;&#13;&#10;import org.springframework.data.domain.Page;&#13;&#10;import org.springframework.data.domain.Pageable;&#13;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#13;&#10;import org.springframework.stereotype.Repository;&#13;&#10;&#13;&#10;import java.time.LocalDateTime;&#13;&#10;import java.util.List;&#13;&#10;&#13;&#10;/**&#13;&#10; * Repository interface for SystemAlert entity&#13;&#10; */&#13;&#10;@Repository&#13;&#10;public interface SystemAlertRepository extends JpaRepository&lt;SystemAlert, Long&gt; {&#13;&#10;&#13;&#10;    Page&lt;SystemAlert&gt; findByStatus(AlertStatus status, Pageable pageable);&#13;&#10;&#13;&#10;    Page&lt;SystemAlert&gt; findBySeverity(AlertSeverity severity, Pageable pageable);&#13;&#10;&#13;&#10;    Page&lt;SystemAlert&gt; findByAlertType(AlertType alertType, Pageable pageable);&#13;&#10;&#13;&#10;    Page&lt;SystemAlert&gt; findByServiceName(String serviceName, Pageable pageable);&#13;&#10;&#13;&#10;    List&lt;SystemAlert&gt; findByStatusIn(List&lt;AlertStatus&gt; statuses);&#13;&#10;&#13;&#10;    List&lt;SystemAlert&gt; findByStatusAndSeverity(AlertStatus status, AlertSeverity severity);&#13;&#10;&#13;&#10;    List&lt;SystemAlert&gt; findByCreatedAtBeforeAndStatus(LocalDateTime date, AlertStatus status);&#10;&#10;    long countByStatus(AlertStatus status);&#10;&#10;    long countBySeverity(AlertSeverity severity);&#10;&#10;    // Additional methods for SystemMonitoringService&#10;    List&lt;SystemAlert&gt; findBySeverityOrderByCreatedAtDesc(AlertSeverity severity);&#10;&#10;    List&lt;SystemAlert&gt; findByStatusOrderByCreatedAtDesc(AlertStatus status);&#10;&#10;    List&lt;SystemAlert&gt; findAllByOrderByCreatedAtDesc();&#10;}&#13;&#10;&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Backend/admin-service/src/main/java/com/cibf/adminservice/admin/Service/SystemMonitoringService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Backend/admin-service/src/main/java/com/cibf/adminservice/admin/Service/SystemMonitoringService.java" />
              <option name="originalContent" value="package com.cibf.adminservice.admin.Service;&#10;&#10;import com.cibf.adminservice.admin.Client.NotificationServiceClient;&#10;import com.cibf.adminservice.admin.Client.ReservationServiceClient;&#10;import com.cibf.adminservice.admin.Client.StallServiceClient;&#10;import com.cibf.adminservice.admin.Client.UserServiceClient;&#10;import com.cibf.adminservice.admin.Common.AlertSeverity;&#10;import com.cibf.adminservice.admin.Common.AlertStatus;&#10;import com.cibf.adminservice.admin.Common.AlertType;&#10;import com.cibf.adminservice.admin.DTO.Response.SystemHealthResponseDTO;&#10;import com.cibf.adminservice.admin.Entity.SystemAlert;&#10;import com.cibf.adminservice.admin.Entity.SystemHealthMetric;&#10;import com.cibf.adminservice.admin.Repository.SystemAlertRepository;&#10;import com.cibf.adminservice.admin.Repository.SystemHealthMetricRepository;&#10;import lombok.RequiredArgsConstructor;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.scheduling.annotation.Scheduled;&#10;import org.springframework.stereotype.Service;&#10;&#10;import javax.sql.DataSource;&#10;import java.sql.Connection;&#10;import java.time.LocalDateTime;&#10;import java.util.*;&#10;&#10;/**&#10; * Service for monitoring system health and generating alerts&#10; */&#10;@Service&#10;@Slf4j&#10;@RequiredArgsConstructor&#10;public class SystemMonitoringService {&#10;&#10;    private final UserServiceClient userServiceClient;&#10;    private final StallServiceClient stallServiceClient;&#10;    private final ReservationServiceClient reservationServiceClient;&#10;    private final NotificationServiceClient notificationServiceClient;&#10;    private final SystemHealthMetricRepository healthMetricRepository;&#10;    private final SystemAlertRepository systemAlertRepository;&#10;    private final DataSource dataSource;&#10;&#10;    /**&#10;     * Get overall system health status&#10;     */&#10;    public SystemHealthResponseDTO getSystemHealth() {&#10;        log.info(&quot;Checking overall system health&quot;);&#10;&#10;        Map&lt;String, SystemHealthResponseDTO.ServiceHealth&gt; services = new HashMap&lt;&gt;();&#10;&#10;        // Check all microservices&#10;        services.put(&quot;user-service&quot;, checkServiceHealth(&quot;user-service&quot;, this::checkUserService));&#10;        services.put(&quot;stall-service&quot;, checkServiceHealth(&quot;stall-service&quot;, this::checkStallService));&#10;        services.put(&quot;reservation-service&quot;, checkServiceHealth(&quot;reservation-service&quot;, this::checkReservationService));&#10;        services.put(&quot;notification-service&quot;, checkServiceHealth(&quot;notification-service&quot;, this::checkNotificationService));&#10;        services.put(&quot;admin-service-database&quot;, checkDatabaseHealth());&#10;&#10;        // Calculate overall status&#10;        boolean allHealthy = services.values().stream()&#10;                .allMatch(s -&gt; &quot;HEALTHY&quot;.equals(s.getStatus()));&#10;&#10;        long unhealthyCount = services.values().stream()&#10;                .filter(s -&gt; !&quot;HEALTHY&quot;.equals(s.getStatus()))&#10;                .count();&#10;&#10;        String overallStatus = allHealthy ? &quot;HEALTHY&quot; : (unhealthyCount &gt;= 3 ? &quot;CRITICAL&quot; : &quot;DEGRADED&quot;);&#10;&#10;        // Save health metrics&#10;        saveHealthMetrics(services, overallStatus);&#10;&#10;        return SystemHealthResponseDTO.builder()&#10;                .overallStatus(overallStatus)&#10;                .timestamp(LocalDateTime.now())&#10;                .services(services)&#10;                .healthyServices(services.values().stream().filter(s -&gt; &quot;HEALTHY&quot;.equals(s.getStatus())).count())&#10;                .totalServices((long) services.size())&#10;                .build();&#10;    }&#10;&#10;    /**&#10;     * Check health of individual services&#10;     */&#10;    private SystemHealthResponseDTO.ServiceHealth checkServiceHealth(String serviceName, ServiceChecker checker) {&#10;        try {&#10;            long startTime = System.currentTimeMillis();&#10;            boolean isHealthy = checker.check();&#10;            long responseTime = System.currentTimeMillis() - startTime;&#10;&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(isHealthy ? &quot;HEALTHY&quot; : &quot;UNHEALTHY&quot;)&#10;                    .responseTime(responseTime)&#10;                    .message(isHealthy ? &quot;Service is operational&quot; : &quot;Service is not responding&quot;)&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        } catch (Exception e) {&#10;            log.error(&quot;Error checking {}: {}&quot;, serviceName, e.getMessage());&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(&quot;UNHEALTHY&quot;)&#10;                    .responseTime(-1L)&#10;                    .message(&quot;Error: &quot; + e.getMessage())&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check database health&#10;     */&#10;    private SystemHealthResponseDTO.ServiceHealth checkDatabaseHealth() {&#10;        try {&#10;            long startTime = System.currentTimeMillis();&#10;            try (Connection connection = dataSource.getConnection()) {&#10;                boolean isValid = connection.isValid(5);&#10;                long responseTime = System.currentTimeMillis() - startTime;&#10;&#10;                return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                        .status(isValid ? &quot;HEALTHY&quot; : &quot;UNHEALTHY&quot;)&#10;                        .responseTime(responseTime)&#10;                        .message(isValid ? &quot;Database connection is healthy&quot; : &quot;Database connection is invalid&quot;)&#10;                        .lastChecked(LocalDateTime.now())&#10;                        .build();&#10;            }&#10;        } catch (Exception e) {&#10;            log.error(&quot;Database health check failed: {}&quot;, e.getMessage());&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(&quot;UNHEALTHY&quot;)&#10;                    .responseTime(-1L)&#10;                    .message(&quot;Database error: &quot; + e.getMessage())&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check user service health&#10;     */&#10;    private boolean checkUserService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = userServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check stall service health&#10;     */&#10;    private boolean checkStallService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = stallServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check reservation service health&#10;     */&#10;    private boolean checkReservationService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = reservationServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check notification service health&#10;     */&#10;    private boolean checkNotificationService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = notificationServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Save health metrics to database&#10;     */&#10;    private void saveHealthMetrics(Map&lt;String, SystemHealthResponseDTO.ServiceHealth&gt; services, String overallStatus) {&#10;        try {&#10;            for (Map.Entry&lt;String, SystemHealthResponseDTO.ServiceHealth&gt; entry : services.entrySet()) {&#10;                SystemHealthMetric metric = SystemHealthMetric.builder()&#10;                        .serviceName(entry.getKey())&#10;                        .status(entry.getValue().getStatus())&#10;                        .responseTime(entry.getValue().getResponseTime())&#10;                        .cpuUsage(0.0) // Could be enhanced with actual CPU metrics&#10;                        .memoryUsage(0.0) // Could be enhanced with actual memory metrics&#10;                        .diskUsage(0.0) // Could be enhanced with actual disk metrics&#10;                        .errorCount(0L) // Could be enhanced with actual error count&#10;                        .timestamp(LocalDateTime.now())&#10;                        .build();&#10;&#10;                healthMetricRepository.save(metric);&#10;            }&#10;            log.info(&quot;Health metrics saved successfully&quot;);&#10;        } catch (Exception e) {&#10;            log.error(&quot;Failed to save health metrics: {}&quot;, e.getMessage());&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Generate system alert&#10;     */&#10;    public SystemAlert generateAlert(AlertType alertType, AlertSeverity severity,&#10;                                     String serviceName, String title, String message) {&#10;        log.info(&quot;Generating system alert: {} - {}&quot;, alertType, title);&#10;&#10;        SystemAlert alert = SystemAlert.builder()&#10;                .alertType(alertType)&#10;                .severity(severity)&#10;                .serviceName(serviceName)&#10;                .title(title)&#10;                .message(message)&#10;                .source(&quot;SYSTEM_MONITOR&quot;)&#10;                .status(AlertStatus.NEW)&#10;                .createdAt(LocalDateTime.now())&#10;                .build();&#10;&#10;        SystemAlert savedAlert = systemAlertRepository.save(alert);&#10;        log.info(&quot;System alert created with ID: {}&quot;, savedAlert.getAlertId());&#10;&#10;        return savedAlert;&#10;    }&#10;&#10;    /**&#10;     * Get all system alerts&#10;     */&#10;    public List&lt;SystemAlert&gt; getAllAlerts() {&#10;        log.info(&quot;Fetching all system alerts&quot;);&#10;        return systemAlertRepository.findAll();&#10;    }&#10;&#10;    /**&#10;     * Get alerts by severity&#10;     */&#10;    public List&lt;SystemAlert&gt; getAlertsBySeverity(AlertSeverity severity) {&#10;        log.info(&quot;Fetching alerts with severity: {}&quot;, severity);&#10;        return systemAlertRepository.findBySeverity(severity);&#10;    }&#10;&#10;    /**&#10;     * Get alerts by status&#10;     */&#10;    public List&lt;SystemAlert&gt; getAlertsByStatus(AlertStatus status) {&#10;        log.info(&quot;Fetching alerts with status: {}&quot;, status);&#10;        return systemAlertRepository.findByStatus(status);&#10;    }&#10;&#10;    /**&#10;     * Get recent alerts&#10;     */&#10;    public List&lt;SystemAlert&gt; getRecentAlerts(int limit) {&#10;        log.info(&quot;Fetching {} most recent alerts&quot;, limit);&#10;        return systemAlertRepository.findTop10ByOrderByCreatedAtDesc();&#10;    }&#10;&#10;    /**&#10;     * Acknowledge alert&#10;     */&#10;    public SystemAlert acknowledgeAlert(Long alertId, UUID acknowledgedBy) {&#10;        log.info(&quot;Acknowledging alert: {} by user: {}&quot;, alertId, acknowledgedBy);&#10;&#10;        SystemAlert alert = systemAlertRepository.findById(alertId)&#10;                .orElseThrow(() -&gt; new RuntimeException(&quot;Alert not found&quot;));&#10;&#10;        alert.setStatus(AlertStatus.ACKNOWLEDGED);&#10;        alert.setAcknowledgedBy(acknowledgedBy);&#10;        alert.setAcknowledgedAt(LocalDateTime.now());&#10;&#10;        return systemAlertRepository.save(alert);&#10;    }&#10;&#10;    /**&#10;     * Resolve alert&#10;     */&#10;    public SystemAlert resolveAlert(Long alertId, UUID resolvedBy, String resolutionNotes) {&#10;        log.info(&quot;Resolving alert: {} by user: {}&quot;, alertId, resolvedBy);&#10;&#10;        SystemAlert alert = systemAlertRepository.findById(alertId)&#10;                .orElseThrow(() -&gt; new RuntimeException(&quot;Alert not found&quot;));&#10;&#10;        alert.setStatus(AlertStatus.RESOLVED);&#10;        alert.setResolvedBy(resolvedBy);&#10;        alert.setResolvedAt(LocalDateTime.now());&#10;        alert.setResolutionNotes(resolutionNotes);&#10;&#10;        return systemAlertRepository.save(alert);&#10;    }&#10;&#10;    /**&#10;     * Scheduled health check - runs every 5 minutes&#10;     */&#10;    @Scheduled(fixedRate = 300000) // 5 minutes&#10;    public void scheduledHealthCheck() {&#10;        log.info(&quot;Running scheduled health check&quot;);&#10;&#10;        SystemHealthResponseDTO health = getSystemHealth();&#10;&#10;        // Generate alerts for unhealthy services&#10;        if (!&quot;HEALTHY&quot;.equals(health.getOverallStatus())) {&#10;            health.getServices().forEach((serviceName, serviceHealth) -&gt; {&#10;                if (!&quot;HEALTHY&quot;.equals(serviceHealth.getStatus())) {&#10;                    AlertSeverity severity = &quot;CRITICAL&quot;.equals(health.getOverallStatus())&#10;                            ? AlertSeverity.CRITICAL&#10;                            : AlertSeverity.HIGH;&#10;&#10;                    generateAlert(&#10;                            AlertType.SERVICE_DOWN,&#10;                            severity,&#10;                            serviceName,&#10;                            &quot;Service Health Alert&quot;,&#10;                            String.format(&quot;%s is %s: %s&quot;, serviceName,&#10;                                    serviceHealth.getStatus(), serviceHealth.getMessage())&#10;                    );&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Get system metrics for last N hours&#10;     */&#10;    public List&lt;SystemHealthMetric&gt; getMetrics(String serviceName, int hours) {&#10;        log.info(&quot;Fetching metrics for {} for last {} hours&quot;, serviceName, hours);&#10;        LocalDateTime since = LocalDateTime.now().minusHours(hours);&#10;        return healthMetricRepository.findByServiceNameAndTimestampAfterOrderByTimestampDesc(serviceName, since);&#10;    }&#10;&#10;    /**&#10;     * Get all metrics for last N hours&#10;     */&#10;    public List&lt;SystemHealthMetric&gt; getAllMetrics(int hours) {&#10;        log.info(&quot;Fetching all metrics for last {} hours&quot;, hours);&#10;        LocalDateTime since = LocalDateTime.now().minusHours(hours);&#10;        return healthMetricRepository.findByTimestampAfterOrderByTimestampDesc(since);&#10;    }&#10;&#10;    @FunctionalInterface&#10;    private interface ServiceChecker {&#10;        boolean check();&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.cibf.adminservice.admin.Service;&#10;&#10;import com.cibf.adminservice.admin.Client.NotificationServiceClient;&#10;import com.cibf.adminservice.admin.Client.ReservationServiceClient;&#10;import com.cibf.adminservice.admin.Client.StallServiceClient;&#10;import com.cibf.adminservice.admin.Client.UserServiceClient;&#10;import com.cibf.adminservice.admin.Common.AlertSeverity;&#10;import com.cibf.adminservice.admin.Common.AlertStatus;&#10;import com.cibf.adminservice.admin.Common.AlertType;&#10;import com.cibf.adminservice.admin.DTO.Response.SystemHealthResponseDTO;&#10;import com.cibf.adminservice.admin.Entity.SystemAlert;&#10;import com.cibf.adminservice.admin.Entity.SystemHealthMetric;&#10;import com.cibf.adminservice.admin.Repository.SystemAlertRepository;&#10;import com.cibf.adminservice.admin.Repository.SystemHealthMetricRepository;&#10;import lombok.RequiredArgsConstructor;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.scheduling.annotation.Scheduled;&#10;import org.springframework.stereotype.Service;&#10;&#10;import javax.sql.DataSource;&#10;import java.sql.Connection;&#10;import java.time.LocalDateTime;&#10;import java.util.*;&#10;&#10;/**&#10; * Service for monitoring system health and generating alerts&#10; */&#10;@Service&#10;@Slf4j&#10;@RequiredArgsConstructor&#10;public class SystemMonitoringService {&#10;&#10;    private final UserServiceClient userServiceClient;&#10;    private final StallServiceClient stallServiceClient;&#10;    private final ReservationServiceClient reservationServiceClient;&#10;    private final NotificationServiceClient notificationServiceClient;&#10;    private final SystemHealthMetricRepository healthMetricRepository;&#10;    private final SystemAlertRepository systemAlertRepository;&#10;    private final DataSource dataSource;&#10;&#10;    /**&#10;     * Get overall system health status&#10;     */&#10;    public SystemHealthResponseDTO getSystemHealth() {&#10;        log.info(&quot;Checking overall system health&quot;);&#10;&#10;        Map&lt;String, SystemHealthResponseDTO.ServiceHealth&gt; services = new HashMap&lt;&gt;();&#10;        &#10;        // Check all microservices&#10;        services.put(&quot;user-service&quot;, checkServiceHealth(&quot;user-service&quot;, this::checkUserService));&#10;        services.put(&quot;stall-service&quot;, checkServiceHealth(&quot;stall-service&quot;, this::checkStallService));&#10;        services.put(&quot;reservation-service&quot;, checkServiceHealth(&quot;reservation-service&quot;, this::checkReservationService));&#10;        services.put(&quot;notification-service&quot;, checkServiceHealth(&quot;notification-service&quot;, this::checkNotificationService));&#10;        services.put(&quot;admin-service-database&quot;, checkDatabaseHealth());&#10;&#10;        // Calculate overall status&#10;        boolean allHealthy = services.values().stream()&#10;                .allMatch(s -&gt; &quot;HEALTHY&quot;.equals(s.getStatus()));&#10;        &#10;        long unhealthyCount = services.values().stream()&#10;                .filter(s -&gt; !&quot;HEALTHY&quot;.equals(s.getStatus()))&#10;                .count();&#10;&#10;        String overallStatus = allHealthy ? &quot;HEALTHY&quot; : (unhealthyCount &gt;= 3 ? &quot;CRITICAL&quot; : &quot;DEGRADED&quot;);&#10;&#10;        return SystemHealthResponseDTO.builder()&#10;                .overallStatus(overallStatus)&#10;                .timestamp(LocalDateTime.now())&#10;                .services(services)&#10;                .healthyServices(services.values().stream().filter(s -&gt; &quot;HEALTHY&quot;.equals(s.getStatus())).count())&#10;                .totalServices((long) services.size())&#10;                .build();&#10;    }&#10;&#10;    /**&#10;     * Check health of individual services&#10;     */&#10;    private SystemHealthResponseDTO.ServiceHealth checkServiceHealth(String serviceName, ServiceChecker checker) {&#10;        try {&#10;            long startTime = System.currentTimeMillis();&#10;            boolean isHealthy = checker.check();&#10;            long responseTime = System.currentTimeMillis() - startTime;&#10;&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(isHealthy ? &quot;HEALTHY&quot; : &quot;UNHEALTHY&quot;)&#10;                    .responseTime(responseTime)&#10;                    .message(isHealthy ? &quot;Service is operational&quot; : &quot;Service is not responding&quot;)&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        } catch (Exception e) {&#10;            log.error(&quot;Error checking {}: {}&quot;, serviceName, e.getMessage());&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(&quot;UNHEALTHY&quot;)&#10;                    .responseTime(-1L)&#10;                    .message(&quot;Error: &quot; + e.getMessage())&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check database health&#10;     */&#10;    private SystemHealthResponseDTO.ServiceHealth checkDatabaseHealth() {&#10;        try {&#10;            long startTime = System.currentTimeMillis();&#10;            try (Connection connection = dataSource.getConnection()) {&#10;                boolean isValid = connection.isValid(5);&#10;                long responseTime = System.currentTimeMillis() - startTime;&#10;&#10;                return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                        .status(isValid ? &quot;HEALTHY&quot; : &quot;UNHEALTHY&quot;)&#10;                        .responseTime(responseTime)&#10;                        .message(isValid ? &quot;Database connection is healthy&quot; : &quot;Database connection is invalid&quot;)&#10;                        .lastChecked(LocalDateTime.now())&#10;                        .build();&#10;            }&#10;        } catch (Exception e) {&#10;            log.error(&quot;Database health check failed: {}&quot;, e.getMessage());&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(&quot;UNHEALTHY&quot;)&#10;                    .responseTime(-1L)&#10;                    .message(&quot;Database error: &quot; + e.getMessage())&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check user service health&#10;     */&#10;    private boolean checkUserService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = userServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check stall service health&#10;     */&#10;    private boolean checkStallService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = stallServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check reservation service health&#10;     */&#10;    private boolean checkReservationService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = reservationServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check notification service health&#10;     */&#10;    private boolean checkNotificationService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = notificationServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Generate system alert&#10;     */&#10;    public SystemAlert generateAlert(AlertType alertType, AlertSeverity severity, &#10;                                     String serviceName, String title, String message) {&#10;        log.info(&quot;Generating system alert: {} - {}&quot;, alertType, title);&#10;&#10;        SystemAlert alert = SystemAlert.builder()&#10;                .alertType(alertType)&#10;                .severity(severity)&#10;                .serviceName(serviceName)&#10;                .title(title)&#10;                .message(message)&#10;                .source(&quot;SYSTEM_MONITOR&quot;)&#10;                .status(AlertStatus.OPEN)&#10;                .createdAt(LocalDateTime.now())&#10;                .build();&#10;&#10;        SystemAlert savedAlert = systemAlertRepository.save(alert);&#10;        log.info(&quot;System alert created with ID: {}&quot;, savedAlert.getAlertId());&#10;&#10;        return savedAlert;&#10;    }&#10;&#10;    /**&#10;     * Get all system alerts&#10;     */&#10;    public List&lt;SystemAlert&gt; getAllAlerts() {&#10;        log.info(&quot;Fetching all system alerts&quot;);&#10;        return systemAlertRepository.findAll();&#10;    }&#10;&#10;    /**&#10;     * Get alerts by severity&#10;     */&#10;    public List&lt;SystemAlert&gt; getAlertsBySeverity(AlertSeverity severity) {&#10;        log.info(&quot;Fetching alerts with severity: {}&quot;, severity);&#10;        return systemAlertRepository.findBySeverityOrderByCreatedAtDesc(severity);&#10;    }&#10;&#10;    /**&#10;     * Get alerts by status&#10;     */&#10;    public List&lt;SystemAlert&gt; getAlertsByStatus(AlertStatus status) {&#10;        log.info(&quot;Fetching alerts with status: {}&quot;, status);&#10;        return systemAlertRepository.findByStatusOrderByCreatedAtDesc(status);&#10;    }&#10;&#10;    /**&#10;     * Get recent alerts&#10;     */&#10;    public List&lt;SystemAlert&gt; getRecentAlerts(int limit) {&#10;        log.info(&quot;Fetching {} most recent alerts&quot;, limit);&#10;        List&lt;SystemAlert&gt; allAlerts = systemAlertRepository.findAllByOrderByCreatedAtDesc();&#10;        return allAlerts.stream().limit(limit).toList();&#10;    }&#10;&#10;    /**&#10;     * Acknowledge alert&#10;     */&#10;    public SystemAlert acknowledgeAlert(Long alertId, UUID acknowledgedBy) {&#10;        log.info(&quot;Acknowledging alert: {} by user: {}&quot;, alertId, acknowledgedBy);&#10;        &#10;        SystemAlert alert = systemAlertRepository.findById(alertId)&#10;                .orElseThrow(() -&gt; new RuntimeException(&quot;Alert not found&quot;));&#10;        &#10;        alert.setStatus(AlertStatus.ACKNOWLEDGED);&#10;        alert.setAcknowledgedBy(acknowledgedBy);&#10;        alert.setAcknowledgedAt(LocalDateTime.now());&#10;        &#10;        return systemAlertRepository.save(alert);&#10;    }&#10;&#10;    /**&#10;     * Resolve alert&#10;     */&#10;    public SystemAlert resolveAlert(Long alertId, UUID resolvedBy, String resolutionNotes) {&#10;        log.info(&quot;Resolving alert: {} by user: {}&quot;, alertId, resolvedBy);&#10;        &#10;        SystemAlert alert = systemAlertRepository.findById(alertId)&#10;                .orElseThrow(() -&gt; new RuntimeException(&quot;Alert not found&quot;));&#10;        &#10;        alert.setStatus(AlertStatus.RESOLVED);&#10;        alert.setResolvedBy(resolvedBy);&#10;        alert.setResolvedAt(LocalDateTime.now());&#10;        alert.setResolutionNotes(resolutionNotes);&#10;        &#10;        return systemAlertRepository.save(alert);&#10;    }&#10;&#10;    /**&#10;     * Scheduled health check - runs every 5 minutes&#10;     */&#10;    @Scheduled(fixedRate = 300000) // 5 minutes&#10;    public void scheduledHealthCheck() {&#10;        log.info(&quot;Running scheduled health check&quot;);&#10;        &#10;        SystemHealthResponseDTO health = getSystemHealth();&#10;        &#10;        // Generate alerts for unhealthy services&#10;        if (!&quot;HEALTHY&quot;.equals(health.getOverallStatus())) {&#10;            health.getServices().forEach((serviceName, serviceHealth) -&gt; {&#10;                if (!&quot;HEALTHY&quot;.equals(serviceHealth.getStatus())) {&#10;                    AlertSeverity severity = &quot;CRITICAL&quot;.equals(health.getOverallStatus()) &#10;                            ? AlertSeverity.CRITICAL &#10;                            : AlertSeverity.HIGH;&#10;                    &#10;                    generateAlert(&#10;                            AlertType.SERVICE_DOWN,&#10;                            severity,&#10;                            serviceName,&#10;                            &quot;Service Health Alert&quot;,&#10;                            String.format(&quot;%s is %s: %s&quot;, serviceName, &#10;                                    serviceHealth.getStatus(), serviceHealth.getMessage())&#10;                    );&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Get system metrics for last N hours (simplified - returns empty for now)&#10;     */&#10;    public List&lt;SystemHealthMetric&gt; getMetrics(String serviceName, int hours) {&#10;        log.info(&quot;Fetching metrics for {} for last {} hours&quot;, serviceName, hours);&#10;        // Returns empty list - metrics collection can be enhanced later&#10;        return new ArrayList&lt;&gt;();&#10;    }&#10;&#10;    /**&#10;     * Get all metrics for last N hours (simplified - returns empty for now)&#10;     */&#10;    public List&lt;SystemHealthMetric&gt; getAllMetrics(int hours) {&#10;        log.info(&quot;Fetching all metrics for last {} hours&quot;, hours);&#10;        // Returns empty list - metrics collection can be enhanced later&#10;        return new ArrayList&lt;&gt;();&#10;    }&#10;&#10;    @FunctionalInterface&#10;    private interface ServiceChecker {&#10;        boolean check();&#10;    }&#10;}&#10;&#10;import com.cibf.adminservice.admin.Client.NotificationServiceClient;&#10;import com.cibf.adminservice.admin.Client.ReservationServiceClient;&#10;import com.cibf.adminservice.admin.Client.StallServiceClient;&#10;import com.cibf.adminservice.admin.Client.UserServiceClient;&#10;import com.cibf.adminservice.admin.Common.AlertSeverity;&#10;import com.cibf.adminservice.admin.Common.AlertStatus;&#10;import com.cibf.adminservice.admin.Common.AlertType;&#10;import com.cibf.adminservice.admin.DTO.Response.SystemHealthResponseDTO;&#10;import com.cibf.adminservice.admin.Entity.SystemAlert;&#10;import com.cibf.adminservice.admin.Entity.SystemHealthMetric;&#10;import com.cibf.adminservice.admin.Repository.SystemAlertRepository;&#10;import com.cibf.adminservice.admin.Repository.SystemHealthMetricRepository;&#10;import lombok.RequiredArgsConstructor;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.scheduling.annotation.Scheduled;&#10;import org.springframework.stereotype.Service;&#10;&#10;import javax.sql.DataSource;&#10;import java.sql.Connection;&#10;import java.time.LocalDateTime;&#10;import java.util.*;&#10;&#10;/**&#10; * Service for monitoring system health and generating alerts&#10; */&#10;@Service&#10;@Slf4j&#10;@RequiredArgsConstructor&#10;public class SystemMonitoringService {&#10;&#10;    private final UserServiceClient userServiceClient;&#10;    private final StallServiceClient stallServiceClient;&#10;    private final ReservationServiceClient reservationServiceClient;&#10;    private final NotificationServiceClient notificationServiceClient;&#10;    private final SystemHealthMetricRepository healthMetricRepository;&#10;    private final SystemAlertRepository systemAlertRepository;&#10;    private final DataSource dataSource;&#10;&#10;    /**&#10;     * Get overall system health status&#10;     */&#10;    public SystemHealthResponseDTO getSystemHealth() {&#10;        log.info(&quot;Checking overall system health&quot;);&#10;&#10;        Map&lt;String, SystemHealthResponseDTO.ServiceHealth&gt; services = new HashMap&lt;&gt;();&#10;&#10;        // Check all microservices&#10;        services.put(&quot;user-service&quot;, checkServiceHealth(&quot;user-service&quot;, this::checkUserService));&#10;        services.put(&quot;stall-service&quot;, checkServiceHealth(&quot;stall-service&quot;, this::checkStallService));&#10;        services.put(&quot;reservation-service&quot;, checkServiceHealth(&quot;reservation-service&quot;, this::checkReservationService));&#10;        services.put(&quot;notification-service&quot;, checkServiceHealth(&quot;notification-service&quot;, this::checkNotificationService));&#10;        services.put(&quot;admin-service-database&quot;, checkDatabaseHealth());&#10;&#10;        // Calculate overall status&#10;        boolean allHealthy = services.values().stream()&#10;                .allMatch(s -&gt; &quot;HEALTHY&quot;.equals(s.getStatus()));&#10;&#10;        long unhealthyCount = services.values().stream()&#10;                .filter(s -&gt; !&quot;HEALTHY&quot;.equals(s.getStatus()))&#10;                .count();&#10;&#10;        String overallStatus = allHealthy ? &quot;HEALTHY&quot; : (unhealthyCount &gt;= 3 ? &quot;CRITICAL&quot; : &quot;DEGRADED&quot;);&#10;&#10;        // Save health metrics&#10;        saveHealthMetrics(services, overallStatus);&#10;&#10;        return SystemHealthResponseDTO.builder()&#10;                .overallStatus(overallStatus)&#10;                .timestamp(LocalDateTime.now())&#10;                .services(services)&#10;                .healthyServices(services.values().stream().filter(s -&gt; &quot;HEALTHY&quot;.equals(s.getStatus())).count())&#10;                .totalServices((long) services.size())&#10;                .build();&#10;    }&#10;&#10;    /**&#10;     * Check health of individual services&#10;     */&#10;    private SystemHealthResponseDTO.ServiceHealth checkServiceHealth(String serviceName, ServiceChecker checker) {&#10;        try {&#10;            long startTime = System.currentTimeMillis();&#10;            boolean isHealthy = checker.check();&#10;            long responseTime = System.currentTimeMillis() - startTime;&#10;&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(isHealthy ? &quot;HEALTHY&quot; : &quot;UNHEALTHY&quot;)&#10;                    .responseTime(responseTime)&#10;                    .message(isHealthy ? &quot;Service is operational&quot; : &quot;Service is not responding&quot;)&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        } catch (Exception e) {&#10;            log.error(&quot;Error checking {}: {}&quot;, serviceName, e.getMessage());&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(&quot;UNHEALTHY&quot;)&#10;                    .responseTime(-1L)&#10;                    .message(&quot;Error: &quot; + e.getMessage())&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check database health&#10;     */&#10;    private SystemHealthResponseDTO.ServiceHealth checkDatabaseHealth() {&#10;        try {&#10;            long startTime = System.currentTimeMillis();&#10;            try (Connection connection = dataSource.getConnection()) {&#10;                boolean isValid = connection.isValid(5);&#10;                long responseTime = System.currentTimeMillis() - startTime;&#10;&#10;                return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                        .status(isValid ? &quot;HEALTHY&quot; : &quot;UNHEALTHY&quot;)&#10;                        .responseTime(responseTime)&#10;                        .message(isValid ? &quot;Database connection is healthy&quot; : &quot;Database connection is invalid&quot;)&#10;                        .lastChecked(LocalDateTime.now())&#10;                        .build();&#10;            }&#10;        } catch (Exception e) {&#10;            log.error(&quot;Database health check failed: {}&quot;, e.getMessage());&#10;            return SystemHealthResponseDTO.ServiceHealth.builder()&#10;                    .status(&quot;UNHEALTHY&quot;)&#10;                    .responseTime(-1L)&#10;                    .message(&quot;Database error: &quot; + e.getMessage())&#10;                    .lastChecked(LocalDateTime.now())&#10;                    .build();&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check user service health&#10;     */&#10;    private boolean checkUserService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = userServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check stall service health&#10;     */&#10;    private boolean checkStallService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = stallServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check reservation service health&#10;     */&#10;    private boolean checkReservationService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = reservationServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Check notification service health&#10;     */&#10;    private boolean checkNotificationService() {&#10;        try {&#10;            ResponseEntity&lt;?&gt; response = notificationServiceClient.healthCheck();&#10;            return response.getStatusCode().is2xxSuccessful();&#10;        } catch (Exception e) {&#10;            return false;&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Save health metrics to database&#10;     */&#10;    private void saveHealthMetrics(Map&lt;String, SystemHealthResponseDTO.ServiceHealth&gt; services, String overallStatus) {&#10;        try {&#10;            for (Map.Entry&lt;String, SystemHealthResponseDTO.ServiceHealth&gt; entry : services.entrySet()) {&#10;                SystemHealthMetric metric = SystemHealthMetric.builder()&#10;                        .serviceName(entry.getKey())&#10;                        .status(entry.getValue().getStatus())&#10;                        .responseTime(entry.getValue().getResponseTime())&#10;                        .cpuUsage(0.0) // Could be enhanced with actual CPU metrics&#10;                        .memoryUsage(0.0) // Could be enhanced with actual memory metrics&#10;                        .diskUsage(0.0) // Could be enhanced with actual disk metrics&#10;                        .errorCount(0L) // Could be enhanced with actual error count&#10;                        .timestamp(LocalDateTime.now())&#10;                        .build();&#10;&#10;                healthMetricRepository.save(metric);&#10;            }&#10;            log.info(&quot;Health metrics saved successfully&quot;);&#10;        } catch (Exception e) {&#10;            log.error(&quot;Failed to save health metrics: {}&quot;, e.getMessage());&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Generate system alert&#10;     */&#10;    public SystemAlert generateAlert(AlertType alertType, AlertSeverity severity,&#10;                                     String serviceName, String title, String message) {&#10;        log.info(&quot;Generating system alert: {} - {}&quot;, alertType, title);&#10;&#10;        SystemAlert alert = SystemAlert.builder()&#10;                .alertType(alertType)&#10;                .severity(severity)&#10;                .serviceName(serviceName)&#10;                .title(title)&#10;                .message(message)&#10;                .source(&quot;SYSTEM_MONITOR&quot;)&#10;                .status(AlertStatus.NEW)&#10;                .createdAt(LocalDateTime.now())&#10;                .build();&#10;&#10;        SystemAlert savedAlert = systemAlertRepository.save(alert);&#10;        log.info(&quot;System alert created with ID: {}&quot;, savedAlert.getAlertId());&#10;&#10;        return savedAlert;&#10;    }&#10;&#10;    /**&#10;     * Get all system alerts&#10;     */&#10;    public List&lt;SystemAlert&gt; getAllAlerts() {&#10;        log.info(&quot;Fetching all system alerts&quot;);&#10;        return systemAlertRepository.findAll();&#10;    }&#10;&#10;    /**&#10;     * Get alerts by severity&#10;     */&#10;    public List&lt;SystemAlert&gt; getAlertsBySeverity(AlertSeverity severity) {&#10;        log.info(&quot;Fetching alerts with severity: {}&quot;, severity);&#10;        return systemAlertRepository.findBySeverity(severity);&#10;    }&#10;&#10;    /**&#10;     * Get alerts by status&#10;     */&#10;    public List&lt;SystemAlert&gt; getAlertsByStatus(AlertStatus status) {&#10;        log.info(&quot;Fetching alerts with status: {}&quot;, status);&#10;        return systemAlertRepository.findByStatus(status);&#10;    }&#10;&#10;    /**&#10;     * Get recent alerts&#10;     */&#10;    public List&lt;SystemAlert&gt; getRecentAlerts(int limit) {&#10;        log.info(&quot;Fetching {} most recent alerts&quot;, limit);&#10;        return systemAlertRepository.findTop10ByOrderByCreatedAtDesc();&#10;    }&#10;&#10;    /**&#10;     * Acknowledge alert&#10;     */&#10;    public SystemAlert acknowledgeAlert(Long alertId, UUID acknowledgedBy) {&#10;        log.info(&quot;Acknowledging alert: {} by user: {}&quot;, alertId, acknowledgedBy);&#10;&#10;        SystemAlert alert = systemAlertRepository.findById(alertId)&#10;                .orElseThrow(() -&gt; new RuntimeException(&quot;Alert not found&quot;));&#10;&#10;        alert.setStatus(AlertStatus.ACKNOWLEDGED);&#10;        alert.setAcknowledgedBy(acknowledgedBy);&#10;        alert.setAcknowledgedAt(LocalDateTime.now());&#10;&#10;        return systemAlertRepository.save(alert);&#10;    }&#10;&#10;    /**&#10;     * Resolve alert&#10;     */&#10;    public SystemAlert resolveAlert(Long alertId, UUID resolvedBy, String resolutionNotes) {&#10;        log.info(&quot;Resolving alert: {} by user: {}&quot;, alertId, resolvedBy);&#10;&#10;        SystemAlert alert = systemAlertRepository.findById(alertId)&#10;                .orElseThrow(() -&gt; new RuntimeException(&quot;Alert not found&quot;));&#10;&#10;        alert.setStatus(AlertStatus.RESOLVED);&#10;        alert.setResolvedBy(resolvedBy);&#10;        alert.setResolvedAt(LocalDateTime.now());&#10;        alert.setResolutionNotes(resolutionNotes);&#10;&#10;        return systemAlertRepository.save(alert);&#10;    }&#10;&#10;    /**&#10;     * Scheduled health check - runs every 5 minutes&#10;     */&#10;    @Scheduled(fixedRate = 300000) // 5 minutes&#10;    public void scheduledHealthCheck() {&#10;        log.info(&quot;Running scheduled health check&quot;);&#10;&#10;        SystemHealthResponseDTO health = getSystemHealth();&#10;&#10;        // Generate alerts for unhealthy services&#10;        if (!&quot;HEALTHY&quot;.equals(health.getOverallStatus())) {&#10;            health.getServices().forEach((serviceName, serviceHealth) -&gt; {&#10;                if (!&quot;HEALTHY&quot;.equals(serviceHealth.getStatus())) {&#10;                    AlertSeverity severity = &quot;CRITICAL&quot;.equals(health.getOverallStatus())&#10;                            ? AlertSeverity.CRITICAL&#10;                            : AlertSeverity.HIGH;&#10;&#10;                    generateAlert(&#10;                            AlertType.SERVICE_DOWN,&#10;                            severity,&#10;                            serviceName,&#10;                            &quot;Service Health Alert&quot;,&#10;                            String.format(&quot;%s is %s: %s&quot;, serviceName,&#10;                                    serviceHealth.getStatus(), serviceHealth.getMessage())&#10;                    );&#10;                }&#10;            });&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Get system metrics for last N hours&#10;     */&#10;    public List&lt;SystemHealthMetric&gt; getMetrics(String serviceName, int hours) {&#10;        log.info(&quot;Fetching metrics for {} for last {} hours&quot;, serviceName, hours);&#10;        LocalDateTime since = LocalDateTime.now().minusHours(hours);&#10;        return healthMetricRepository.findByServiceNameAndTimestampAfterOrderByTimestampDesc(serviceName, since);&#10;    }&#10;&#10;    /**&#10;     * Get all metrics for last N hours&#10;     */&#10;    public List&lt;SystemHealthMetric&gt; getAllMetrics(int hours) {&#10;        log.info(&quot;Fetching all metrics for last {} hours&quot;, hours);&#10;        LocalDateTime since = LocalDateTime.now().minusHours(hours);&#10;        return healthMetricRepository.findByTimestampAfterOrderByTimestampDesc(since);&#10;    }&#10;&#10;    @FunctionalInterface&#10;    private interface ServiceChecker {&#10;        boolean check();&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>